let deferredPrompt;window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();deferredPrompt=e;document.getElementById('installBtn')?.style?.setProperty('display','inline-flex')});document.getElementById('installBtn')?.addEventListener('click',async e=>{e.preventDefault();if(!deferredPrompt)return;deferredPrompt.prompt();await deferredPrompt.userChoice;deferredPrompt=null});const form=document.getElementById('waitlist');const toast=m=>{const t=document.getElementById('toast');if(!t)return;t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2200)};form?.addEventListener('submit',ev=>{ev.preventDefault();toast('Added â€” saved locally.');});if('serviceWorker'in navigator){navigator.serviceWorker.register('sw.js?v=11').then(()=>{if(navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage('{"cmd":"RESET_IF_OLD"}')}})}